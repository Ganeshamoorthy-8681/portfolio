<!-- Header -->
<app-header></app-header>

<section class="min-h-screen bg-white dark:bg-[var(--color-primary-dark-bg)] py-16 lg:py-24 mt-16 transition-all duration-500 relative">
  <!-- Background Decorations -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <!-- Top Left Circle -->
    <div class="absolute top-20 left-10 w-40 h-40 bg-purple-500/10 dark:bg-purple-400/15 rounded-full blur-3xl animate-pulse">
    </div>
    <!-- Top Right Circle -->
    <div class="absolute top-32 right-16 w-32 h-32 bg-blue-500/10 dark:bg-blue-400/15 rounded-full blur-2xl animate-pulse" style="animation-delay: 1s;">
    </div>
    <!-- Middle Left Circle -->
    <div class="absolute top-1/2 left-20 w-56 h-56 bg-purple-600/8 dark:bg-purple-300/12 rounded-full blur-3xl">
    </div>
    <!-- Middle Right Circle -->
    <div class="absolute top-1/2 right-10 w-48 h-48 bg-indigo-500/10 dark:bg-indigo-400/15 rounded-full blur-3xl">
    </div>
    <!-- Bottom Left Circle -->
    <div class="absolute bottom-32 left-1/4 w-36 h-36 bg-violet-500/10 dark:bg-violet-400/15 rounded-full blur-2xl">
    </div>
    <!-- Bottom Right Circle -->
    <div class="absolute bottom-20 right-1/3 w-28 h-28 bg-purple-400/12 dark:bg-purple-300/18 rounded-full blur-xl">
    </div>
  </div>

  <div class="max-w-4xl mx-auto px-6 lg:px-8 relative z-10">
    
    <!-- Loading State -->
    <div *ngIf="loading" class="flex items-center justify-center min-h-[60vh]">
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl shadow-gray-200/50 dark:shadow-purple-500/10 p-12 text-center border border-gray-200 dark:border-gray-700">
        <div class="animate-spin w-12 h-12 border-4 border-purple-200 dark:border-purple-800 border-t-purple-600 dark:border-t-purple-400 rounded-full mx-auto mb-6"></div>
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Loading article...</h3>
        <p class="text-gray-600 dark:text-gray-400">Please wait while we fetch the content</p>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="flex items-center justify-center min-h-[60vh]">
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl shadow-gray-200/50 dark:shadow-purple-500/10 p-12 text-center border border-gray-200 dark:border-gray-700 max-w-md">
        <div class="w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-6">
          <mat-icon class="text-2xl text-red-600 dark:text-red-400">error_outline</mat-icon>
        </div>
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-3">{{ error }}</h3>
        <p class="text-gray-600 dark:text-gray-400 mb-6">The article you're looking for might have been moved or doesn't exist.</p>
        <button 
          (click)="goBack()"
          class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-xl transition-all duration-300 shadow-lg shadow-purple-500/30 hover:shadow-xl hover:shadow-purple-500/40 transform hover:scale-105"
        >
          <mat-icon class="text-lg">arrow_back</mat-icon>
          <span>Back to Blog</span>
        </button>
      </div>
    </div>

    <!-- Blog Post Content -->
    <article *ngIf="blogPost && !loading && !error" class="bg-white dark:bg-gray-800/50 rounded-2xl shadow-xl shadow-gray-200/50 dark:shadow-purple-500/10 border border-gray-200 dark:border-gray-700 overflow-hidden">
      
      <!-- Navigation Bar -->
      <div class="flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-800/50">
        <button 
          (click)="goBack()"
          class="inline-flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 border border-gray-300 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-500 rounded-lg font-medium transition-all duration-300 hover:shadow-md"
        >
          <mat-icon class="text-lg">arrow_back</mat-icon>
          <span>Back to Blog</span>
        </button>
        
        <div class="flex items-center gap-2">
          <button 
            (click)="shareBlogPost()" 
            class="w-10 h-10 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-purple-100 dark:hover:bg-purple-900/30 rounded-lg transition-all duration-300"
            title="Share Article"
          >
            <mat-icon class="text-xl">share</mat-icon>
          </button>
        </div>
      </div>

      <!-- Article Header -->
      <header class="p-8 pb-0" data-aos="fade-up">
        <div class="flex flex-wrap gap-3 mb-6">
          <span class="inline-flex items-center gap-1 px-3 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 rounded-lg text-sm font-medium">
            <mat-icon class="text-sm">calendar_today</mat-icon>
            {{ formatDate(blogPost.publishDate) }}
          </span>
          <span class="inline-flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium">
            <mat-icon class="text-sm">schedule</mat-icon>
            {{ getReadTimeText(blogPost.readTime) }}
          </span>
          <span class="inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 rounded-lg text-sm font-medium">
            <mat-icon class="text-sm">category</mat-icon>
            {{ blogPost.category }}
          </span>
          <span 
            class="inline-flex items-center gap-1 px-3 py-1 bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300 rounded-lg text-sm font-medium"
            [title]="'Content format: ' + getContentTypeDisplay()"
          >
            <mat-icon class="text-sm">{{ getContentTypeIcon() }}</mat-icon>
            {{ getContentTypeDisplay() }}
          </span>
        </div>
        
        <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-6 leading-tight">
          {{ blogPost.title }}
        </h1>
        
        <p class="text-xl text-gray-600 dark:text-gray-300 mb-8 leading-relaxed">
          {{ blogPost.excerpt }}
        </p>
        
        <div class="flex flex-wrap gap-2 mb-8">
          <span 
            *ngFor="let tag of blogPost.tags" 
            class="px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm hover:bg-purple-100 dark:hover:bg-purple-900/30 hover:text-purple-700 dark:hover:text-purple-300 transition-colors duration-300 cursor-pointer"
          >
            #{{ tag }}
          </span>
        </div>

        <div class="flex items-center justify-between text-sm text-gray-600 dark:text-gray-400">
          <div class="flex items-center gap-6">
            <div class="flex items-center gap-2">
              <mat-icon class="text-lg">visibility</mat-icon>
              <span>{{ blogPost.views || 0 }} views</span>
            </div>
            <div class="flex items-center gap-2">
              <mat-icon class="text-lg text-red-500">favorite</mat-icon>
              <span>{{ blogPost.likes || 0 }} likes</span>
            </div>
          </div>
          
          <div class="flex items-center gap-2">
            <mat-icon class="text-lg">person</mat-icon>
            <span class="font-medium">By {{ blogPost.author }}</span>
          </div>
        </div>
      </header>

      <!-- Featured Image -->
      <div class="px-8 mb-8" data-aos="fade-up" data-aos-delay="200">
        <div class="relative rounded-2xl overflow-hidden shadow-2xl shadow-gray-400/20 dark:shadow-purple-500/20 group">
          <img 
            [src]="blogPost.featuredImage" 
            [alt]="blogPost.title" 
            class="w-full h-64 md:h-80 lg:h-96 object-cover transition-transform duration-700 group-hover:scale-105"
          >
          <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        </div>
      </div>

      <!-- Content Divider -->
      <div class="h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent mx-8 mb-8"></div>

      <!-- Article Content -->
      <div class="px-8 mb-8" data-aos="fade-up" data-aos-delay="400">
        
        <!-- Content Loading State -->
        <div *ngIf="contentLoading" class="flex items-center justify-center py-12">
          <div class="text-center">
            <div class="animate-spin w-8 h-8 border-3 border-purple-200 dark:border-purple-800 border-t-purple-600 dark:border-t-purple-400 rounded-full mx-auto mb-4"></div>
            <p class="text-gray-600 dark:text-gray-400 text-sm">Processing {{ getContentTypeDisplay() }} content...</p>
          </div>
        </div>

        <!-- Parsed Content -->
        <div *ngIf="!contentLoading" class="prose prose-lg dark:prose-invert prose-purple max-w-none">
          <div class="text-gray-700 dark:text-gray-300 leading-relaxed {{ getContentCssClass() }}" [innerHTML]="parsedContent"></div>
        </div>
      </div>

      <!-- Content Divider -->
      <div class="h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent mx-8 mb-8"></div>

      <!-- Article Footer -->
      <footer class="p-8 bg-gray-50/50 dark:bg-gray-800/50" data-aos="fade-up" data-aos-delay="600">
        <div class="space-y-6">
          <!-- Tags Section -->
          <div>
            <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
              <mat-icon class="text-purple-600 dark:text-purple-400">local_offer</mat-icon>
              Related Tags
            </h4>
            <div class="flex flex-wrap gap-2">
              <span 
                *ngFor="let tag of blogPost.tags" 
                class="inline-flex items-center gap-1 px-4 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full text-sm font-medium border border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:text-purple-700 dark:hover:text-purple-300 transition-all duration-300 cursor-pointer"
              >
                <mat-icon class="text-xs">tag</mat-icon>
                {{ tag }}
              </span>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 justify-between items-center pt-6 border-t border-gray-200 dark:border-gray-600">
            <button 
              (click)="shareBlogPost()"
              class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium rounded-xl transition-all duration-300 shadow-lg shadow-green-500/30 hover:shadow-xl hover:shadow-green-500/40 transform hover:scale-105"
            >
              <mat-icon class="text-lg">share</mat-icon>
              <span>Share Article</span>
            </button>
            
            <button 
              (click)="goBack()"
              class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-xl transition-all duration-300 shadow-lg shadow-purple-500/30 hover:shadow-xl hover:shadow-purple-500/40 transform hover:scale-105"
            >
              <mat-icon class="text-lg">arrow_back</mat-icon>
              <span>More Articles</span>
            </button>
          </div>
        </div>
      </footer>

      <!-- Table of Contents (could be added later) -->
      <!-- <aside class="table-of-contents" data-aos="fade-left" data-aos-delay="800">
        <h4>Table of Contents</h4>
        <nav class="toc-nav">
          Add TOC implementation here
        </nav>
      </aside> -->

    </article>
  </div>
</section>

<!-- Footer -->
<app-footer></app-footer>
